@model ViewModel
<link rel="stylesheet" href="https://kendo.cdn.telerik.com/2019.3.1023/styles/kendo.default-v2.min.css" />

<script src="https://kendo.cdn.telerik.com/2019.3.1023/js/jquery.min.js"></script>
<script src="https://kendo.cdn.telerik.com/2019.3.1023/js/kendo.all.min.js"></script>

<section>

    <div>
        <div id="example" style="float:left;width:21%">

            <div class="demo-section k-content" style="height: 600px;
    background-color: #ffff;
    overflow: scroll;">
                <div class="container">
                    <div style="float:left;width:15%">
                        <button class="btn btn-success"><i class="fa fa-search" aria-hidden="true"></i></button>
                    </div>
                    <div style="float:left;width:80%;position:relative;left:-7px;">
                        <input class="form-control" id="searchbar" onkeyup="search_sidebar()" type="text"
                               name="search" placeholder="Search ..">
                    </div>

                </div>

                <ul id="treeview">

                    @foreach (var item in Model.AllEquipments.Where(f => f.Sub1_number != null && f.Sub1_description != null))
                    {

                        <li class="data">

                            <span>
                                <a asp-controller="EquipmentMaster"
                                   asp-action="SelectedEquipment"
                                   asp-route-equipmentCode="@item.Sub1_number" style="color:#7273a3">@item.Sub1_number-@item.Sub1_description</a>
                            </span>

                            <ul>
                                @foreach (var item2 in Model.AllEquipments.Where(f => f.Sub2_number != null && f.Sub2_description != null && f.Type == item.Type))
                                {
                                    <li class="data">
                                        @*<a asp-controller="EquipmentMaster" asp-action="ViewJobplan">*@

                                        @*<span ><a href="@Url.Action("SelectedEquipment", "EquipmentMaster",new { id=item2.Id})" style="color:red">@item2.Sub2_number-@item2.Sub2_description</a></span>*@

                                        @*<span><a href="SelectedEquipment/id=@item2.Id" style="color:red">@item2.Sub2_number-@item2.Sub2_description</a></span>*@

                                        <a asp-controller="EquipmentMaster"
                                           asp-action="SelectedEquipment"
                                           asp-route-equipmentCode="@item2.Sub2_number" style="color:#7273a3">@item2.Sub2_number-@item2.Sub2_description</a>

                                        @*</a>*@
                                        <ul>

                                            @foreach (var item3 in Model.AllEquipments.Where(f => f.Sub3_number != null && f.Sub3_description != null && f.Type == item2.Type))
                                            {
                                                <li class="data">
                                                    <a asp-controller="EquipmentMaster"
                                                       asp-action="SelectedEquipment"
                                                       asp-route-equipmentCode="@item3.Sub3_number" style="color:#7273a3">@item3.Sub3_number-@item3.Sub3_description</a>
                                                    <ul>
                                                        @*@foreach (var item4 in Model.Where(f => f.Sub4_number != null && f.Sub4_description != null && f.Type == item3.Type))
                                                            {
                                                            <li class="data">
                                                                <a asp-controller="EquipmentMaster" asp-action="ViewJobplan">
                                                                    <span>@item4.Sub4_number-@item4.Sub4_description</span>
                                                                    </a>
                                                                    <ul>
                                                                        @foreach (var item5 in Model.Where(f => f.Sub5_number != null && f.Sub5_description != null && f.Type == item4.Type))
                                                                        {
                                                                        <li class="data">
                                                                            <a asp-controller="EquipmentMaster" asp-action="ViewJobplan">
                                                                                <span>@item5.Sub5_number-@item.Sub5_description</span>
                                                                                </a>
                                                                        </li>
                                                                        }
                                                                    </ul>


                                                            </li>
                                                            }*@
                                                    </ul>

                                                </li>
                                            }
                                        </ul>
                                    </li>

                                }

                            </ul>
                        </li>


                    }
                </ul>


            </div>

        </div>

        <script>


            $(function () {
                $("li").each(function () {
                    if ($(this).attr("href") == window.location.pathname) {
                        $(this).addClass("active");
                    }
                });
            });
            $(function () {
                $(".makeEditable").click(function () {
                    $('input:text').removeAttr("readonly");
                });
        </script>
        @*<div>
                <button class="btn btn-success makeEditable" type="submit" name="Edit"><i class="fa fa-check-circle"></i>Edit </button>
            </div>*@
        <div class="row" style="float:right;width:80%">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="card">

                    <div class="body">
                        <!-- Nav tabs -->
                        <ul class="nav nav-tabs tab-nav-right" role="tablist">
                            <li role="presentation" class="active"><a href="#general" data-toggle="tab">GENERAL</a></li>
                            <li role="presentation"><a href="#jobplan" data-toggle="tab">JOB PLAN</a></li>
                            <li role="presentation"><a href="#spareparts" data-toggle="tab">SPARE PARTS</a></li>

                        </ul>

                        <!-- Tab panes -->
                        @* --------------------------------------------------------------------General Contents----------------------------------------- *@
                    <div class="tab-content">
                        @if (Model.SelectedEquipment != null)
                        {
                            <div role="tabpanel" class="tab-pane fade in active" id="general">
                                <partial name="_General" model="Model" />
                            </div>
                        }
                        @* ---------------------------------------------------------Jobplan section--------------------------------------------------------------------- *@
                        @if (Model.SelectedJobPlan != null)
                        {
                            <div role="tabpanel" class="tab-pane fade" id="jobplan">

                                <partial name="_JobPlan" model="Model" />
                            </div>
                        }
                        @*--------------------------------------------------------------------SpareParts------------------------------------------------------*@
                        @if (Model.SelectedSparepart != null)
                        {
                            <div role="tabpanel" class="tab-pane fade" id="spareparts">

                                <partial name="_SparePart" model="Model" />
                            </div>
                        }



                        </div>

                    </div>
                </div>
            </div>
        </div>

    </div>
</section>


<script>
    $(document).ready(function () {
        $("#treeview").kendoTreeView();
    });
    $(function () {
        $(".makeEditable").click(function () {
            $('input:text').removeAttr("disabled");
        });
    });
</script>

<style>
    #treeview .k-sprite {
        background-image: url("../content/web/treeview/coloricons-sprite.png");
    }

    .rootfolder {
        background-position: 0 0;
    }

    .folder {
        background-position: 0 -16px;
    }

    .pdf {
        background-position: 0 -32px;
    }

    .html {
        background-position: 0 -48px;
    }

    .image {
        background-position: 0 -64px;
    }

    .hidden {
        display: none;
</style>
<script>
    function search_sidebar() {
        let input = document.getElementById('searchbar').value
        input = input.toLowerCase();
        let x = document.getElementsByClassName('data');

        for (i = 0; i < x.length; i++) {
            if (!x[i].innerHTML.toLowerCase().includes(input)) {
                x[i].style.display = "none";
            }
            else {
                x[i].style.display = "list-item";
            }
        }
    }
</script>

@*<script>
        selectFirstNode: function (treeId) {
                    var el = $('#' + treeId);
                    var tree = el.data('kendoTreeView');
                    var firstNode = el.find('.k-first');
                    tree.select(firstNode);
                }
    </script>*@

<style>
    #searchbar {
        margin-left: 1%;
        border-radius: 3px;
    }
</style>


